Homework 2
================
Rachel Tao

``` r
library(tidyverse)
```

    ## ── Attaching packages ───────────────────────────────────────────────────────────────── tidyverse 1.3.0 ──

    ## ✓ ggplot2 3.3.2     ✓ purrr   0.3.4
    ## ✓ tibble  3.0.3     ✓ dplyr   1.0.2
    ## ✓ tidyr   1.1.2     ✓ stringr 1.4.0
    ## ✓ readr   1.3.1     ✓ forcats 0.5.0

    ## ── Conflicts ──────────────────────────────────────────────────────────────────── tidyverse_conflicts() ──
    ## x dplyr::filter() masks stats::filter()
    ## x dplyr::lag()    masks stats::lag()

``` r
library(readxl)
```

# Problem 1

``` r
trashwheel_df <- 
  read_xlsx(
    "./data/Trash-Wheel-Collection-Totals-8-6-19.xlsx",
    sheet = "Mr. Trash Wheel",
    range = cell_cols("A:N")) %>% 
  janitor::clean_names() %>% 
  drop_na(dumpster) %>% 
  mutate(
    sports_balls = round(sports_balls),
    sports_balls = as.integer(sports_balls)
  )
```

Read precipitation data\!

``` r
precip_2018 <- 
  read_excel(
    "./data/Trash-Wheel-Collection-Totals-8-6-19.xlsx",
    sheet = "2018 Precipitation",
    skip = 1
  ) %>% 
  janitor::clean_names() %>% 
  drop_na(month) %>% 
  mutate(year = 2018) %>% 
  relocate(year)

precip_2017 <- 
  read_excel(
    "./data/Trash-Wheel-Collection-Totals-8-6-19.xlsx",
    sheet = "2017 Precipitation",
    skip = 1
  ) %>% 
  janitor::clean_names() %>% 
  drop_na(month) %>% 
  mutate(year = 2017) %>% 
  relocate(year)
```

Now combine annual precipitation.

``` r
month_df <- 
  tibble(
    month = 1:12,
    month_name = month.name
  )

precip_df <- 
  bind_rows(precip_2018, precip_2017) 

month_df <- 
  left_join(precip_df, month_df, by = "month") %>% 
  select(-"month")
```

This dataset contains information from the Mr. Trashwheel trash
collector in Baltimore, Maryland. As trash enters the inner harbor, the
trashwheel collects that trash, and stores it in a dumpster. The dataset
contains information on year, month, and trash collected, including some
specific kinds of trash. There are a total of 344 rows in our final
dataset. Additional data sheets include monthly precipitation data. The
total precipitation in 2018 was 70.33. The median number of sports balls
in a dumpster in 2017 was 8.

# Problem 2

Read and clean NYC subway data.

``` r
nycsubway_df <- 
  read_csv(
    "./data/NYC_Transit_Subway_Entrance_And_Exit_Data.csv") %>% 
  janitor::clean_names() %>% 
  select(line:entry, vending, ada) %>% 
  mutate(
    entry = 
      ifelse(entry == "YES", TRUE, FALSE),
    vending = 
      ifelse(vending == "YES", TRUE, FALSE))
```

    ## Parsed with column specification:
    ## cols(
    ##   .default = col_character(),
    ##   `Station Latitude` = col_double(),
    ##   `Station Longitude` = col_double(),
    ##   Route8 = col_double(),
    ##   Route9 = col_double(),
    ##   Route10 = col_double(),
    ##   Route11 = col_double(),
    ##   ADA = col_logical(),
    ##   `Free Crossover` = col_logical(),
    ##   `Entrance Latitude` = col_double(),
    ##   `Entrance Longitude` = col_double()
    ## )

    ## See spec(...) for full column specifications.

This dataset has 19 columns and 1868 rows, and includes variables line,
station name, station latitude, station longitude, routes served
(route1-route11), entry, entrance type, vending, and ADA compliance. For
data cleaning, I used the function clean\_names in the janitor package
to make the column names more readable in R, I selected only the columns
for variables that were relevant for this problem, and I used the mutate
function and ifelse function to change the entry column from character
to logical. Since a future question asks about vending, I used the same
method to change the vending column from character to logical. These
data are tidy.

How many distinct stations are there? How many of them are ADA
compliant? What proportion of station entrances/exits without vending
allow entrance?

``` r
ada_stations <- 
  distinct(nycsubway_df, line, station_name, .keep_all = TRUE) %>% 
  filter(ada == TRUE)

no_vending <- 
  filter(nycsubway_df, vending == FALSE) %>% 
  nrow()

entry_no_vending <- 
  filter(nycsubway_df, vending == FALSE) %>% 
  filter(entry == TRUE) %>% 
  nrow()
```

There are 465 distinct stations, of which 84 are ADA compliant. The
proportion of station entrances/exits without vending that allow
entrance is 0.3770492.

A train info - what do they mean by “reformat data so that route number
and route name arrer distinct variables?”

# Problem 3

Read in and clean pols-month.csv

``` r
pols_month_df <- read_csv(
  "./data/fivethirtyeight_datasets/pols-month.csv") %>% 
    separate(mon, into = c("year", "month", "day"), sep = ) %>% 
    mutate(
      month = 
        replace(month, 
                month == c('01', '02', '03', '04', '05', '06', '07', '08', '09', '10', '11', '12'), 
                c("January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"))
    ) %>% 
  relocate(year, month, prez_gop, prez_dem) %>% 
  pivot_longer(
    prez_gop:prez_dem,
    names_to = "president",
    names_prefix = "prez_",
    values_to = "prez_value") %>%
  filter(prez_value == 1) %>% 
  select(-day, -prez_value)
```

    ## Parsed with column specification:
    ## cols(
    ##   mon = col_date(format = ""),
    ##   prez_gop = col_double(),
    ##   gov_gop = col_double(),
    ##   sen_gop = col_double(),
    ##   rep_gop = col_double(),
    ##   prez_dem = col_double(),
    ##   gov_dem = col_double(),
    ##   sen_dem = col_double(),
    ##   rep_dem = col_double()
    ## )

    ## Warning: Problem with `mutate()` input `month`.
    ## ℹ longer object length is not a multiple of shorter object length
    ## ℹ Input `month` is `replace(...)`.

    ## Warning in month == c("01", "02", "03", "04", "05", "06", "07", "08", "09", :
    ## longer object length is not a multiple of shorter object length

    ## Warning: Problem with `mutate()` input `month`.
    ## ℹ number of items to replace is not a multiple of replacement length
    ## ℹ Input `month` is `replace(...)`.

    ## Warning in x[list] <- values: number of items to replace is not a multiple of
    ## replacement length
